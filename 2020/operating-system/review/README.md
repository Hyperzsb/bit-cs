# 复习提纲

### 第1章 - 操作系统概论

1. **早期操作系统设计的主要目标是什么?**

   - 使用户方便、简单地使用计算机系统
   - 使计算机系统能高效地运转

2. **操作系统是资源管理程序，它管理系统中的什么资源？**

   对计算机的硬件和软件（程序和数据）进行管理和调度

3. **为什么要引入多道程序系统?它有什么特点？**

   - 原因：提高 CPU 的利用率，充分发挥系统设备的并行性
   - 特点：:question:在主存中同时存放多个作业，使之同时处于运行状态

4. **叙述操作系统的基本功能。**

   - 处理机管理
   - 存储器管理
   - 设备管理
   - 文件管理

5. **批处理系统、分时系统和实时系统各有什么特点?各适合应用于哪些方面?**

   - 批处理系统：
     - 特点：中心思想是使用一个监控程序软件，各个用户将各自作业的卡片叠或纸代交给机房的操作员，再由操作员将这些作业的卡片或纸带按序成批地放入输入设备，由监控程序自动控制输入设备将各个作业读入到磁带上。之后，监控程序按照顺序自动地把一个个作业装入内存进行处理。
     - 适用场景：:question:
   - 分时系统：
     - 特点：
       - 同时性：若干个用户可以同时使用计算机
       - 独立性：各用户之间彼此独立地占有一台终端工作，互不干扰
       - 交互性：用户从终端键盘上输入各种控制作业命令，系统相应和处理这些命令，并将处理结果输出显示，用户根据系统输出结果再继续输入
       - 及时性：用户的请求能在较短时间内得到响应
     - 适用场景：:question:对用户快速响应
   - 实时系统：
     - 特点：
       - 实时性：系统的正确性不仅依赖于计算的逻辑结果的正确性，而且也依赖于结果产生的及时性
       - 可靠性：实时系统要求硬件和软件措施有非常高的可靠性
       - 确定性
     - 适用场景：工业生产的自动控制、军事上的飞机导航、导弹发射、各种票证的预定、查询

6. **操作系统的特性?**

   - 并发性

     所谓并发性是指为了增计算机系统的处理能力而采用的一种时间上堆叠操作的技术。并发是指系统中存在若干个逻辑上相互独立的程序或程序段，它们都处于活动状态，并竞争系统的各种资源

   - 共享性

     支持系统并发性的物质基础是资源共享。为了提高计算机系统的资源利用率，更好地共享系统资源，操作系统的各部分功能设计中采用了各种各样的分配调度算法

   - 虚拟性

     为了便于用户程序共享计算机系统的各种资源，操作系统把这些资源的一个物理实体变为逻辑上的多个对应物

   - 异步性

     由于系统资源的共享，有限的资源使并发进程之间产生相互制约关系。系统中的各个进程何时执行、何时暂停以及以怎样的速度向前推进和什么时候完成都是不可预知的。异步性给系统带来潜在的危险，有可能导致系统产生与时间有关的错误。操作系统必须保证有效地防止这些错误的发生。

7. **衡量OS的性能指标有哪些？什么是吞吐量、响应时间和周转时间？** 

   - 资源利用率：指在给定的时间内，系统中的某一资源，如 CPU 、存储器、外部设备等，实际使用时间或者实际使用容量所占的比率。显然，要提高资源利用率，就必须使资源尽可能忙碌
   - 吞吐量：指单位时间内系统所处理的信息量。通常以每小时或每天所处理的作业个数来度量
   - 周转时间：指从作业进入系统到作业退出系统所经历的时间。即作业在系统中的等待时间加运行时间。而平均周转时间是指系统运行的几个作业周转时间的平均值

8. **什么是嵌入式系统？**

   是面向用户、产品、应用的系统，可以定义为以应用为中心，以计算机技术为基础、软硬件可裁剪、适应应用系统对功能、可靠性、成本、体积、功耗严格要求的专用计算机系统。凡是将计算机的主机嵌埋在应用系统或设备之中，不为用户所知的计算机应用方式，都是嵌入式应用。嵌入式系统运行的几乎都是实时操作系统

9. **什么是对称多处理？它有什么好处？**

   - 对称多处理：操作系统和用户程序可安排在任何一个处理机上运行，或者同时在所有处理机上运行，各处理机共享主存和各种 I/O 设备
   - 好处：
     - 增加了系统的吞吐率：多个作业可以分配在任何一个处理机上执行
     - 增加了系统的可靠性：一个处理机的失效，只是性能的降低，不会影响整个系统

10. **为了实现系统保护，CPU通常有哪两种工作状态？各种状态下分别执行什么程序？什么时候发生状态转换？状态转换由谁实现的？**

    - 工作状态：
      - 用户态（目态）
      - 核心态（管理态、特权态）
    - 运行程序：
      - 操作系统程序运行在核心态。在核心态下，允许执行处理机的全部指令集，访问所有的寄存器和存储区
      - 用户程序运行在用户态。在用户态下，只允许执行处理机的非特权指令，访问指定的寄存器和存储区
    - 状态转换：
      - 由用户态切换到内核态主要发生以下三种情况：

        - 中断：又叫外中断，是一些外部设备向 CPU 泄放的一个硬件信号，如各种外部设备的 I/O 完成中断、时钟中断等，与 CPU 执行的指令无关，是异步发生的，分为可屏蔽和不可屏蔽中断。当中断产生时，CPU 响应中断，转入响应的中断处理程序执行
        - 异常：又叫陷入，是执行程序自己产生的，是同步发生的，而且是不可屏蔽的。产生的条件是：
          - 由于程序错误，如程序的非法操作码、地址越界、除数为0以及存储器管理中的页面失效等
          - 由于程序请求操作系统服务和请求系统资源等使用系统调用
        - 系统调用
      - 由内核态切换回用户态主要发生在以下四种情况：

        - 完成中断或异常的处理
        - 新进程或线程的启动
        - 进程调度选择执行新的进程
        - 操作系统向进程发送信号

11. **什么是系统调用？什么是特权指令？特权指令执行时，CPU处于哪种工作状态？**

    - 系统调用：就是操作系统内提供的一些子程序。编程人员通过使用系统调用命令，向操作系统提出资源请求或获得系统的一些功能服务，以取得操作系统的服务
    - 特权指令：是指关系系统全局的指令，如存取和操作 CPU 状态、启动各种外部设备、设置时钟时间、关中断、清主存、修改存储器管理寄存器、改变用户方式到核心方式和停机指令等。这些指令只允许操作系统使用，不允许用户使用
    - 特权指令执行时：CPU 处于核心态

12. **操作系统通常向用户提供哪几种类型的接口?其主要作用是什么?** 

    - 用户与操作系统的操作接口
      - 命令解释程序：提供一组操作命令或作业控制语言。用户使用这些命令，组织和控制作业的执行。命令解释程序的主要功能是获得用户的命令并解释执行

      - 图形用户接口

      - 作业运行的控制命令
    - 系统调用接口：就是操作系统内提供的一些子程序。编程人员通过使用系统调用命令，向操作系统提出资源请求或获得系统的一些功能服务，以取得操作系统的服务

### 第2-3章 - 进程管理

1. **程序顺序执行的特点**

   - 程序运行环境的封闭性：程序在运行时独占全机资源，这些资源的状态只能由这个运行的程序决定和改变，不受外界因素影响
   - 程序结果的可再现性：程序执行时，只要初始条件相同，程序执行结果与其执行速度无关，其最终结果不变
   - 实现简单，但资源利用率低

2. **何谓进程，进程由哪些部分组成？试述进程的四大特性（动态性、独立性、并发性、结构性）及进程和程序的区别。**

   - 进程：进程（Process），又叫做任务（Task）
     - 是程序的一次执行过程
     - 是程序在一个数据集合上顺序执行时发生的活动。是系统进行资源分配和调度的一个独立单位
   - 进程的组成：进程是由程序、数据和进程控制块三部分组成
   - 特性：
     - 增强了计算机系统的处理能力，提高了资源利用率
     - 失去了程序的封闭性和可再现性：并发程序执行的结果与其执行的相对速度有关，是不确定的
     - 并行执行的程序间产生了相互制约关系：间接制约关系和直接制约关系
     - 程序与 CPU 执行的活动之间不再一一对应
   - 同程序的区别：
     - 进程是程序的一次执行过程，具有动态性：程序是完成某个特定功能的指令的有序序列，是一个静态的概念。程序可以作为一种软件资源长期保存。进程把程序作为它的运行实体，没有程序，也就没有进程。进程是程序的一次执行过程，它是临时的，有生命周期的，由创建而产生，完成任务后被撤销
     - 进程是系统进行资源分配和调度的一个独立单位，具有独立性
     - 一个进程可以与其他进程并发执行，具有并发性
     - 进程具有结构性

3. **进程控制块的作用是什么?它主要包括哪几部分内容?**

   - 进程控制块的作用：为了描述进程的运行变化情况，操作系统为每个进程定义了一个数据结构，叫进程控制块（Process Control Block, PCB），也叫进程描述符（Process Descriptor, PD），它是进程存在的唯一标识。它包含了进程的描述信息和管理控制信息，是进程动态特性的集中体现
   - 内容：
     - 进程表示数：系统中的每个进程都有一个唯一的标识，通常是一个整数
     - 进程的状态以及调度和存储器管理信息：进程目前状态、进程优先级、程序在主存的入口地址、在外存的地址等
     - 进程使用的资源信息：分配给进程的 I/O 设备、正在执行的 I/O 请求信息、当前进程正打开的文件等
     - CPU 现场保护区：程序计数器（PC）、程序状态字（PSW）、通用寄存器及堆栈指针等
     - 记账信息：CPU 时间量、账号等
     - 进程之间的家族关系
     - 进程的链接指针：为了管理的需要，系统在 PCB 中设置一个链接指针，用于将相同状态的进程链接在一起

4. **进程的基本状态，试举出使进程状态发生变化的事件并描绘它的状态转换图。**

   - 基本状态：
     - 创建态：指进程刚刚被创建，还没有正式提交给处理机调度程序对其进行管理时的状态
     - 终止态：指进程不再受处理机调度管理，其原因是它可能已经正常完成或故障中断
     - 就绪态：指进程已经获得了除 CPU 之外的全部资源，等待系统分配 CPU，一旦获得 CPU，进程就可以变为运行态
     - 运行态：正在 CPU 上执行的进程所处的状态为运行态
     - 阻塞态：当一个进程因等待某个事件发生，如等待 I/O 完成或等待接收一个消息，而不能运行时，处于阻塞态，处于阻塞态的进程在逻辑上是不能运行的，即使 CPU 空闲，它也不能占用 CPU
   - 发生状态变化的事件：:question:
   - 状态转换图：:book:（P31）

5. **什么是原语?什么是进程控制？**

   - 原语：是不允许被中断的程序，或叫其执行过程不可分割
   - 进程控制：是指系统使用一些具有特定功能的程序段来创建、撤销进程以及完成进程各状态间转换的一系列有效管理

6. **进程调度的功能、方式、时机、算法。作业调度，交换调度。作业的周转时间和作业的带权周转时间?**

   - 进程机调度的功能

     > 进程调度也称为处理机的低级调度，或直接称为处理机调度

     - 管理系统中各进程的执行情况：处理机调度程序就是通过 PCB 变化来准确掌握系统中所有进程的执行情况和状态特征的
     - 选择进程真正占有 CPU：这是处理机调度的实质
     - 进行进程上下文的切换：进程的上下文是指操作系统为运行进程设置的相应的运行环境和进程的物理实体，由三部分组成：
       - 用户级上下文：进程的实体中的程序和数据
       - 寄存器级：CPU 的现场信息
       - 系统级上下文：PCB、进程运行时的系统环境，包括进程状态和存储器的管理信息

   - 进程调度的方式

     - 非抢先（非剥夺）方式：调度程序一旦把 CPU 分配给某一进程后便让它一直运行下去，直到进程完成或发生某事件（发生错误、提出 I/O 请求等）而不能运行时，才将 CPU 分给其他进程。当一个紧急任务需要及时处理时，该调度方法无法满足，从而影响系统的实时性。通常用在批处理系统中，简单、系统开销小
     - 抢先（剥夺）方式：当一个进程正在执行时，系统可以基于某种策略剥夺 CPU 给其他进程。这种调度方式更多用在分时系统和实时系统，以及现代的多任务操作系统中，以便充分保证进程的并发性和及时响应

   - 进程调度的时机

     - 现行进程完成执行或由于某种错误而中止运行
     - 正在执行的进程提出 I/O 请求，等待 I/O 完成
     - 分时系统中，按照时间片轮转，分给进程的时间片用完
     - 基于优先级调度，有更高优先级进程变为就绪
     - 进程执行了某种原语操作，如阻塞原语或唤醒原语时，都可能引起进程调度

   - 处理机调度算法

     >  以下三种算法常常用于批处理系统中的作业调度

     - 先来先服务调度法（First Come First Serve, FCFS）：系统维护一个队列，按照进程到达就绪队列的先后次序顺序调度运行。优点是节省机器时间、运行效率高；缺点是容易被大作业进程垄断，使得平均等待时间延长

     - 最短作业的进程优先调度法（Short Job First, SJF）：要求每个作业的进程提供所需的运行时间，每次调度时总是选取运行时间最短的进程运行。优点是对于运行时间短的进程有利，进程的平均等待和周转时间最佳，容易实现；缺点是可能使得长进程没有机会运行，这种现象称为饿死

     - 响应比高者优先调度法（High Response Next, HRN）：该算法兼顾了运行时间短和等待时间长的作业。响应比 

       $$R_p = (作业等待时间 + 作业估计运行时间) / 作业估计运行时间 = 1 + 作业等待时间 / 作业估计运行时间$$

       但是由于每当进行作业调度时，系统需要花费大量时间计算各个作业的响应比，系统开销较大

     > 以下三种算法常用于分时系统

     - 优先级调度法（Priority Scheduling）：这是最常用的一种进程调度方法。系统总是将 CPU 分配给就绪队列中优先级最高的进程。确定优先级的方法分为两种：
       - 静态优先级法：静态优先级是系统创建时确定的，它依据进程的类型是用户进程还是系统进程。通常赋予系统进程较高优先级。对于用户进程，还要根据申请资源情况决定，申请资源少的赋予较高优先级。一旦进程的优先级确定了，在整个运行过程中将保持不变。优点是简单；缺点是不能动态反映进程特点，与 SJF 一样，使得低优先级的长进程没有机会运行
       - 动态优先级法：进程在开始创建时，根据某种原则确定一个优先级后，随着进程执行时间的变化，其优先级不断地进行动态调整。缺点是需要一定的系统开销
     - 轮转法（Round Robin, RR）：通常用在分时系统中，它轮流地调度系统中所有就绪进程。使用一个定时时钟，使之定时地发出中断，时钟中断处理程序在设置新的时钟常量后，即转入处理机调度。时间片长短的确定遵循这样的原则：既要保证系统各个用户进程及时地得到响应，又不要由于时间片太短而增加调度的开销，降低系统的效率
     - 多级反馈队列轮转法（Multi-level Feedback Queue, MFQ）：系统设置多个就绪队列，且进程在其声明周期内可能在多个队列中存在，几个队列可以采用前后台运行。前台队列采用 RR 进行调度，后台采用 FCFS 进行调度。前台进程优先级都高于后台进程。前台的各种队列的时间片也不一样，高优先级队列进程的时间片较短，低优先级队列进程的时间片较长。通常刚创建的进程和因请求 I/O 未用完时间片的进程排在最高优先级队列。在这个队列中各进程轮流运行2～3个时间片，未完成的进程排到下一个较低优先级队列

     > 以下两种方法用于实时操作系统

     - 时钟驱动法（Clock-Driven）：各任务的调度安排通常是在系统开始运行前就确定的
     - 加权轮转法（Weighted Round-Robin）：不同的进程可以给不同的权值，权值就是分配给它的一小部分处理器时间。每次轮转时，各个进程获得处理机的时间就是它具有的权值长度。该算法广泛应用在高速开关网的实时控制中

   - 作业调度、交换调度：
     - 处理机的高级调度，又称为作业调度：在多道批处理系统中，作业调度时非常必要的。为充分利用系统资源，通常将 I/O 量大与 CPU 量大的作业结合在一起进行调度。在分时系统中，通常没有作业调度，其目的是为了对各用户命令的及时响应，使用户进程得到快速运行
     - 处理机的低级调度，又称为进程调度：作业调度和进程调度的主要区别在于调度程序的频度。作业调度只有在一个作业退出系统时才需要被调用执行。进程调度的目的是使一些进程并发执行，以最大化 CPU 的利用率。因此，进程调度是比较频繁的
     - 处理机的交换调度，又称中级调度或换入换出：是指为了充分利用系统资源和更快响应各进程，将处于主存就绪或主存阻塞等不具备运行条件的进程换出到外存交换区；将处于外存就绪具备运行条件的进程换入主存，以便运行它
   - 作业的周转时间和作业的带权周转时间：:question:

7. **线程的定义，线程与进程的比较。系统对线程的支持（用户级线程、核心级线程、两级组合）。**

   - 线程：进程在逻辑上表示操作系统必须做的一个任务，线程表示完成该任务的许多可能的子任务。线程是进程中的一个可执行实体，是被操作系统调度的一个独立单位。一个进程可以有多个线程，多线程共享该进程拥有的所有资源
   - 线程与进程的比较：
     - 拥有的资源：一个进程拥有一个独立的存储空间、打开的文件以及至少一个线程；进程中的其他线程时通过调用线程创建原语显式创建的；进程中只要还有一个线程在执行，这个进程就不会终止
     - 调度：进程调度时，进行进程上下文的切换需要较大的系统时间和空间的开销；而采用线程调度时，由于同一进程内的线程共享进程的资源，其上下文切换只把线程仅有的一小部分资源交换即可，从而提高了系统的效率
     - 并发性：系统不仅进程之间可以并发执行，而且同一进程内的多线程也可以并发执行
     - 安全性：由于同一进程的多线程共享进程的所有资源，一个错误的线程可以任意改变另一个线程使用的数据而导致错误的发生，而使用多进程则不会产生这一问题。从保护的角度看，使用多进程比多线程在安全性上可能更有效
   - 系统对线程的支持：
     - 用户级线程：是指有关线程的所有管理工作都由用户程序通过调用用户态运行的线程库来完成，系统内核并不知道线程的存在。任何一个用户级线程的阻塞，都将引起整个进程的阻塞。将这种模型称为多对一模型
     - 核心级线程：是指有关线程的管理工作都由系统内核完成。用户应用程序是通过调用线程的 API 来管理线程的。由于内核支持线程，任何一个线程的阻塞，一般不影响同一进程的其他线程的执行。称这种模型为一对一模型。系统通常对应用创建的线程数量有一定限制
     - 两级组合：有些系统既支持用户级，也支持核心级线程。多个用户级的线程可以对应等量或少量的核心级线程。当一个线程阻塞时，核心可调度同一进程或不同进程的另一个线程执行，使得线程在宏观和微观上都能很好地并行。称这种模型为多对多模型

8. **并发执行的进程在系统中通常表现为几种关系?各是在什么情况下发生的?**

   - 对资源的共享引起的互斥关系：这是一种间接制约关系，即互斥关系
   - 协作完成同一个任务引起的同步关系：进程可能要在某些同步点上等待协作者发信息后才能继续运行。这种关系叫做直接制约关系，又叫同步关系

   - 进程之间的前序关系

9. **什么叫临界资源?什么叫临界区?对临界区的使用应符合的四个准则（互斥使用、让权等待、有空让进、有限等待）。**

   - 临界资源：就是一次仅允许一个进程使用的系统中的一些共享资源
   - 临界区：就是并发进程对临界资源必须互斥操作的那段程序
   - 准则：
     - 互斥使用：不能同时有两个进程在它们的临界区内执行
     - 让权等待：等待进入临界区的进程，应释放处理机后阻塞等待
     - 有空让进：在临界区之外运行的进程不可以阻止其他的进程进入临界区
     - 有限等待：不应该使要进入临界区的进程无限期地等待在临界区之外

10. **解决进程之间互斥的办法：开、关中断，加锁、开锁（又叫测试与设置，通常由一条机器指令完成），软件方法，信号量与P、V操作。**

    - 关中断：当一个进程在临界区内执行时，关闭所有的中断。方法简单，但系统要付出较高的代价，限制了处理机交叉执行程序的能力，且在多处理机的情况下会失效
    - 使用测试和设置硬件指令：该机器指令可以原子性地读取一个变量的值，然后再设置新的值。Test & Set。会造成忙等待。
    - P、V 操作：:book:（P49）

11. **若信号量S表示某一类资源，则对S执行P、V操作的直观含意是什么? 当进程对信号量S执行P、V操作时，S的值发生变化，当S>0、S=0、和S<0时，其物理意义是什么?**

    P 操作相当于申请资源，V 操作相当于释放资源。有的资料用 wait() 和 signal() 来代替

    n 个进程并发执行时，信号量的可能取值范围为 +1～-(n-1)。

12. **在用P/V操作实现进程通信时，应根据什么原则对信号量赋初值？**

    :question:

13. **经典的IPC问题。**

    - 生产者消费者问题:book:（P52）

      无论是生产者还是消费者，P 操作的顺序是重要的。如果将生产者进程中的两个 P 操作的次序交换，当缓冲区满时，生产者欲向缓冲区放产品时，将在 P(empty) 上等待，但它已经获得了使用缓冲区的权力。若此后，消费者欲取产品时，由于申请使用缓冲区不成功，它将在 P(mutex) 上等待。从而导致生产者等待消费者取走产品，而消费者却在等待生产者释放缓冲区，这种相互等待就会造成系统发生死锁现象

    - 读者与写者问题:book:（P53）

      - 读者优先
      - 写者优先
      - 公平竞争

    - 理发师问题:notebook:

    - 哲学家就餐问题:notebook:

14. **进程高级通信有哪些实现机制？**

    - 消息缓冲：
      - 系统负责设立一个消息缓冲池，其中每个缓冲区可以存放一个消息，每当进程欲发送消息时，向系统申请一个缓冲区，将消息存入缓冲区，然后把该缓冲区链接到接收进程的消息队列上。消息队列通常放在接收进程的进程控制块中
      - 每个进程设立一个信箱，每个信箱可容纳多封信件。此信箱中的信件是操作系统执行发送原语将信件投入指定信箱，由接收者自行接收信件并进行处理
    - 管道：是指用于连接一个写进程和一个读进程的一个共享文件。该文件按照先进先出方法实现它们之间的通信。是通过操作系统管理的核心缓冲区（通常几 KB）来实现的单项通信方式
    - 共享存储区：诸进程为了相互交换大量数据，在主存中划出了一块共享存储区，并将该共享存储区连接到它们各自的地址空间的某一部分。诸进程通过读或写共享主存区中的数据来实现通信。这是进程通信中最快捷的一种方式，但要注意协调它们之间的速度，以保证共享数据的一致性

15. **死锁产生的必要条件及解决死锁的方法**

    - 必要条件：

      - 互斥条件：每个资源是不可共享的，它或者已经分配给一个进程，或者空闲
      - 保持和等待条件：进程因请求资源而被阻塞等待时，对已经分配给它的资源保持不放
      - 不剥夺条件：进程所获得的资源在未使用完之前，不能被其他进程强行剥夺，只能由获得资源的进程自己释放
      - 循环等待条件：存在一个进程循环链，链中有两个或多个进程，每个进程正在等待链中的下一个成员保持的资源

    - 解决死锁的方法；

      - 鸵鸟算法

        置之不理或忽略，假装毫无问题

      - 死锁的预防

        - 破坏互斥条件：资源的互斥使用条件是由资源本身的性质决定的，因此不能破坏。使用 spooling 技术，可以借助于共享设备的一部分空间将一台独享设备改造成多台设备，以满足多个进程的共享使用。但实际中，不是所有设备都能采用 spooling 技术，即使能采用，由于多个进程竞争磁盘空间，磁盘空间的不足，也依旧可能产生死锁
        - 破坏保持和等待条件：进程在开始前，必须获得其所需的全部资源。若系统不能满足，则该进程等待。这就是资源的静态分配。这种分配方式使资源利用率很低。而且，许多进程在开始运行前，不能精确提出所用资源数量
        - 破坏非剥夺条件：当一个进程已经占有一个资源，而其他资源不能满足时，则在进入阻塞态前强行释放已占有的资源。以后再运行时，再重新申请。这也是不可行的，因为保护进程放弃资源时的现场以及之后现场的恢复，系统要付出很高的代价
        - 破坏循环等待条件：该方法就是采用资源的有序分配法。将系统的全部资源按类进行全局编号排序，所有进程对资源的请求必须严格按序号递增顺序进行。采用这种限制后，进程-资源图就不会形成环路，也就不会死锁

      - 死锁的避免

        - 进程-资源轨迹:book:（P64）
        - 同一类资源的银行家算法：:book:（P65）
          - 当一个进程提出一个资源请求时，假定分配给它，并调用检查系统状态安全性的算法，如果系统是安全的，则对申请者的假分配变为实际的分配。否则，推迟它的请求，让其阻塞等待
          - 检查系统安全性的算法：根据系统剩余的资源情况，银行家进行检查，看满足请求者的要求后，是否仍使系统中的所有进程都能正常完成（即能找到一个进程完成序列），若能，则系统是安全的，反之是不安全的
        - 多类资源的银行家算法:book:（P66）

        > 银行家算法是在系统运行期间实施的，需要花费大量时间判断系统状态的安全性，而且算法本身比较保守

      - 死锁的检测和恢复

        死锁的检测和恢复技术是指系统不试图防止死锁发生，代之的是让它发生。当它发生时，再设法检测，然后采取措施恢复之

        - 死锁的检测：就是对系统中的进程-资源图进行检查，如果进程-资源图包含了一个或多个循环，就存在死锁，且环路中的任何一个进程都是死锁进程；如果没有环路存在，则该系统没有死锁（具体算法 DFS）

        - 死锁的恢复：

          当检测到死锁的存在时，有几种死锁恢复的方法：

          - 故障终止一些进程：

            - 故障终止所有进程：这种方法简单，被终止进程原先的计算作废，以后重新开始计算
            - 一次故障终止一个进程，直到死锁解除为止：这将会使系统开销很大，因为每次都要探测死锁是否解除

            选择撤销进程时，尽可能对系统影响较小。通常应遵循一些原则：

            - 目前刚启动的进程
            - 目前为止产生的输出最少
            - 撤销时，系统耗费的处理机时间较少
            - 目前为止分配的资源总量最少
            - 进程的优先级最低

          - 资源剥夺：为了使死锁恢复，暂时从当前占有者夺走一部分资源给另一些进程，直到死锁恢复

            - 从一个进程取走资源给另一进程使用：然而，从一个进程取走资源之后再返回给它的能力是与资源本身的特性密切相关的。采用剥夺方法使系统从死锁中恢复常常使困难的，或不可能的。
            - 回滚一些进程

          死锁的检测和恢复技术虽然有效，但消耗系统的时间太多，实际也很少使用，往往采用简单的人工干预，来解除死锁

16. **理解银行家算法的实质。能够利用银行家算法避免死锁。**

    :book:（P65）

### 第4章 - 存储器管理

1. **存储器管理的功能。名字空间、地址空间、存储空间、逻辑地址、物理地址。**

   - 功能：
     - 存储器分配：主要解决多道程序或多进程如何共享主存的问题
     - 地址转换或重定位：研究各种地址变换方法及响应的地址变换机构
     - 存储器保护：研究如何防止故障程序破坏操作系统和存储器内的其他各种信息
     - 存储器扩充：研究采用多级存储技术实现虚拟存储器及所用的各种管理算法
     - 存储器共享：研究并发执行的进程如何共享主存中的程序和数据问题
   - 名字空间：程序中的各种符号的集合所限定的空间
   - 地址空间、逻辑地址：由于程序在主存中的位置是不可预知的，编译或汇编时，程序中各个地址总是以“0”作为参考地址，其他所有地址都是以0作为起始地址顺序编码的。因此把程序限定空间叫做逻辑地址空间，其中的地址叫做相对地址或逻辑地址。程序的地址空间的大小由被编译和链接后的程序大小决定
   - 存储空间、物理地址：存储空间是指物理存储器中全部物理单元的集合所限定的空间。它是由字或字节组层的一个大的阵列，每个字或字节都有它自己的编号，这些编号就叫做物理地址或绝对地址，又叫实地址。存储空间的大小由系统的硬件配置决定。一个程序只有从地址空间装入到存储空间后才能运行

2. **什么是地址重定位?分为哪两种?各是依据什么和什么时候实现的?试比较它们的优缺点。**

   - 静态重定位：

     在装入进程时，由装入程序把用户程序中的指令和数据地址全部转换成存储空间的绝对地址。由于地址转换工作是在程序执行前集中一次完成的，这样在程序执行时就无须再进行地址转换工作

     一旦要改变程序在主存的位置，必须重新装入一次。显然，采用静态链接或装入时的动态链接方法是通过静态重定位程序完成地址重定位的

     - 优点：静态重定位不需要硬件支持，因而容易实现
     - 缺点：但静态重定位要求程序占有连续的存储区，而且程序在执行时不允许在主存移动。这显然只能用于早期的单道批处理或单任务系统中

   - 动态重定位：

     动态重定位是靠硬件的地址转换机构来实现的。通常采用的办法是设置一个重定位寄存器。在将程序装入到存储区后，把这个存储区的起始地址送入重定位寄存器中。在程序执行时，对于每一个存储器的访问，都要将相对地址转换成主存的绝对地址

     这种方式允许程序在主存中移动，此时只要用新地址修改重定位寄存器即可

     - 优点：
       - 主存利用充分
       - 允许程序不必占有连续的存储区域
       - 便于多用户共享存储器中的同一程序和数据
     - 缺点：
       - 需要额外硬件支持，增加了系统成本

3. **内存划分为两大部分：用户空间和操作系统空间。存储器管理是针对用户空间进行管理的。**

   存储器通常划分为两部分：一部分是操作系统占用区，一部分是多用户进程分享的用户占用区。存储器管理就是对用户占用区的管理

4. **存储保护的目的是什么?对各种存储管理方案实现存储保护时，硬件和软件各需做什么工作?**

   :question:

5. **试述可变式分区管理空闲区的方法及存储区的保护方式。覆盖与交换有什么特点？**

   - 可变式分区：为了提高存储器的利用率，存储空间的划分推迟到转入进程时进行。当进程要求运行时，系统从空闲的存储空间划分出大小正好等于进程大小的一个存储区分配给进程

     管理分区使用的数据结构：

     - 分区说明表：

       为方便主存的分配和回收，分区说明表可由两张表格组成。一张是已分配区表，记录已分配给进程的分区情况；另一张是未分配区表，记录主存空闲区的情况

       当有进程要求分配主存时，首先按照某种算法从未分配区表中找一个足以容纳该进程大小的空闲区，若这个分区比较大，则一分为二，一部分分配给进程，另一部分仍作为空闲区留在表中。再在已分配区表中找一个空表目，填入进程分配的响应信息

       采用分区说明表比较直观、简单，但由于主存分区个数不定，所以表格长度应设置合理，否则会造成浪费，或造成表格溢出

     - 空闲区链:book:（P80）

     分配算法：

     - 首次适应法（First Fit）：空闲区表或空闲区链中的空闲区按照起始地址从小到大排列。当进程要求装入主存时，存储分配程序从起始地址最小的空闲区开始扫描，直到找到一个足够大的空闲区，然后将该空闲区分配给进程，剩余的部分继续保留在队列中
     - 最佳适应法（Best Fit）：存储分配程序要扫描表或链中所有的空闲区，直到找到能满足进程要求且为最小的空闲区为止
     - 最坏适应法（Worst Fit）：存储分配程序要扫描表或链中所有的空闲区，直到找到能满足进程要求且为最大的空闲区为止。之后，把这个最大的空闲区一分为二，一部分分给进程，另一部分仍留在链中。其想法在于使剩下的空闲区仍能分配给其他进程。但这样一来，一旦有一个更大进程要求分配时，可能没有一个空闲区能满足要求而过早阻塞在存储器之外
     - 为提高分配存储区的速度，对最佳适应法和最坏适应法进行改进，使空闲区按其尺寸分别从小到大和从大到小排列，从而使最佳、最坏适应法的查找速度与首次适应法一样高效。但每当分配一个空闲区，且有一部分剩余空闲空间时，要重新进行表或链的整理以遍按序排列，从而增加了系统的开销

     当系统回收一个释放区时，要考虑它是否有邻接的空闲区。若有，要进行合并，再将合并后的空闲区插入空闲区表或链的适当位置中:book:（P81）

   - 存储器保护

     - 通常固定式分区采用静态重定位。当采用静态重定位方式装入进程时，系统通常设置两个界限寄存器来实现存储器的保护。上界为进程在主存区的最高地址，下界为进程在主存区的起始地址

     - 对于可变式分区，采用动态重定位。为此，系统设置一个基址寄存器，存放运行进程的主存区起始地址；再增设一个限长寄存器，用来存放运行程序的大小

   - 覆盖和交换的特点：:question:

6. **页表的作用是什么?简述页式管理的地址变换过程。能利用页表实现逻辑地址转换成物理地址。管理内存的数据结构有哪些？**

   - 页表的作用：为实现动态地址变换，系统为进入主存的程序建立一个页表，记录该进程的逻辑页与主存块的映射关系
   - 页式管理的地址变换过程：:book:（P85）
   - 管理内存的数据结构：
     - 页表：每个进程一个，放在主存的专门区域，用来将进程的虚页转换成主存的物理块
     - 进程控制块：在进程控制块中增加这样的信息：该进程的页表在主存的始址和页表长度
     - 存储空间使用情况表：为了记录存储空间的使用情况，通常使用存储分块表和位示图:book:（P87）​。主存分块的大小是一个很重要的设计问题。分块越小，位示图越大；分块越大，位示图越小。但块越大，可能会产生页内碎片，应折中考虑。查找位示图是费时的操作

7. **什么是页式存储器的内零头?它与页的大小有什么关系?可变式分区管理产生什么样的零头（碎片）？**

   - 内零头：页内碎片
   - 关系：页越大，可能产生的页内碎片越大
   - 可变式分区管理产生：:question:

8. **段式存储器管理与页式管理的主要区别是什么?**

   - 段是信息的逻辑单位，它是由用户划分的，因此段对用户是可见的；页是信息的物理单位，是为了方便管理由硬件划分的，对用户是透明的
   - 页的大小固定不变，由系统决定。段的大小是不固定的，由其完成的功能决定
   - 段向用户提供的是二维地址空间，页向用户提供的是一维地址空间，其页号和页内地址是机器硬件的功能
   - 段是信息的逻辑单位，允许动态扩充，便于存储保护和信息的共享；页是信息的物理单位，其大小是固定不变的，页的保护和共享受到限制
   - 段式管理与分区管理一样可能产生主存碎片，而页式管理则较好地消除了碎片
   - 段式管理便于实现动态链接，而页式管理只能进行静态链接
   - 段式与页式一样，为了实现管理，需要系统设置更多的表格，系统开销较大

9. **什么是虚拟存储器。虚拟存储器的容量能大于主存容量加辅存容量之和吗?**

   - 虚拟存储器：

     虚拟存储器是为满足应用对存储器容量的巨大需求而为用户构造的一个非常大的地址空间。它允许进程的地址空间不必全部进入主存就可以执行，从而使用户在编程时无须担心存储器不足。

     当系统提供给用户程序的有效寻址范围与主存大小无关时，称该机器提供了虚拟存储器管理技术

   - 虚拟存储器容量不能大于主存容量加辅存容量之和

10. **实现请求页式管理，需要对页表进行修改，一般要增加状态位、修改位、访问位。试说明它们的作用。**

    - 状态位：指示该页是否在主存。“1”表示在主存，“0”表示不在主存
    - 修改位：
      - 指示该页调入主存后是否修改过。
      - “1”表示修改过，“0”表示没有修改过。每当页中的任何一个字节或字被写时，硬件设置该页的修改位为“1”。
      - 当选择一页淘汰时，若它的修改位为1，要将被淘汰的页写回到磁盘，以保证信息的一致性；若修改位为0，因为磁盘上有副本，新调页直接覆盖它即可
    - 访问位：指示该页最近是否被访问过。“1”表示访问过，“0”表示没有访问过

11. **产生缺页中断时，系统应做哪些工作?** 

    :book:（P92）

12. **会利用FIFO、LRU、OPT以及时钟页面置换算法描述页面置换过程，计算产生的缺页率。Belady异常。**

    - FIFO：:book:（P93）
    - LRU：:book:（P94）
    - OPT：:book:（P93）
    - Belady 异常：采用 FIFO 算法时，为进程分配的主存块多时，有时产生的缺页中断次数反而比分配主存块少时增多

13. **什么是程序的局部性原理？什么叫系统抖动?工作集模型如何防止系统抖动?**

    - 程序的局部性原理：
      - 时间局部性：程序中往往含有许多循环，一旦某部分的指令被执行或某部分数据被访问后，则在不久之后会重复执行或访问这一部分
      - 空间局部性：程序中有些部分是彼此互斥的（例如分支）。程序一次运行时，只有其中满足条件的那部分代码运行，不满足条件的代码不被执行。即使顺序执行的程序，也会随着程序的执行，其地址域在相对短的时间段内，变化不大
    - 系统抖动：刚被淘汰的页面马上又要用，因而又要把它调入，调入不久再被淘汰，淘汰不久再次装入，如此反复，使整个系统处于频繁的调入调出状态，大大降低系统的处理效率，这种现象叫抖动
    - 工作集模型如何防止系统抖动：设法记录每个进程的工作集，并确保在进程运行前将其工作集调入主存，以大大减少进程的缺页率，甚至在一段时间内不产生缺页中断，从而大大提高了系统的运行效率

14. **多级页表的概念，多级页表中页表建立的时机。写时复制技术的概念。**

    - 多级页表的概念：

      采用多级页表结构，使页表不再占用连续的主存空间，且页表在使用时才被装入，从而大大节约了主存空间

      划分的级数越多，执行一个访内操作花费的时间就越长。为了减少查找多级页表时间，可以采用散列算法构造页表或采用转置页表

    - 多级页表建立的时机：页表的建立不再是进程装入主存时，而是推迟到要访问页时，才为包含该页的页表分配空间和建立页表页

    - 写时复制技术的概念：当两个进程要读写相同内容的主存时，系统就给该主存区赋予写时复制的页面保护。若没有进程向共享主存区写时，两个进程就共享它。一旦一个进程要向共享页写时，系统就把此物理页复制到主存的另一个页框中，并更新该进程的页表指向此复制的页框，且设置该页为可读写。而这个被复制的页面对其他进程不可见。其他进程继续共享未经改动的页

15. **页的共享问题。需要一个专门数据结构来记录进程间共享页。**

    避免在主存中同时有多个相同页的副本

    不是所有页都可共享，通常只有只读页，如程序文本，可以被共享，而可读写的数据页不可共享

    将被共享页锁在主存，并在页表中增加引用计数项，仅当其引用计数为0时，才允许调出或释放共享页占用的空间

### 第5章 - 文件系统

1. **什么是文件和文件系统? 文件系统的主要功能。UNIX系统如何对文件进行分类？它有什么好处？**

   - 文件和文件系统：
     - 文件：从用户角度看，文件是存储在外部存储器的具有符号名的相关信息的集合
     - 文件系统：是操作系统中管理文件的软件机构
   - 文件系统的主要功能：
     - 管理磁盘、磁带等组成的文件存储器
     - 实现用户的按名存取
     - 提供灵活多样的文件结构和存取方法，便于用户对文件进行存储和加工处理
     - 提供一套方便、简单的文件操作命令
     - 保证文件信息的安全性
     - 便于文件的共享
   - UNIX 文件分类：
     - 普通文件：这种文件包括系统文件、应用程序文件、库文件，也包括用户的各种文件。可以是 ASCII 码组成的字符文件，也可以是二机制代码构成的文件。通常把由 ASCII 字符组成的文件叫文本文件
     - 目录文件：目录文件是用来维护文件系统结构的文件。通过目录文件，系统可以检索普通文件。由于目录文件也是由字符序列组成的，因此对它的处理与普通文件相同
     - 特别文件：指系统中所有的输入、输出和输入/输出型设备，以及其他一些特殊文件。把输入、输出设备（中断、打印机）叫做字符型特别文件。把输入/输出型设备（磁带、磁盘、光盘）叫做块特别文件。这些文件与普通文件相同，都要查找目录、验证使用权限、进行读或写等，只是系统把对特别文件的操作转为对不同设备的操作
   - 分类的好处：对于普通文件的所有操作也适用于外部设备，方便了用户的使用

2. **文件目录的作用是什么?文件目录项通常包含哪些内容? 文件控制块。**

   - 文件目录的作用：是指记录文件的名字及其存放物理地址的一张映射表，表中包括了很多文件控制块
   - 文件目录项通常包含内容：文件控制块

3. **文件的逻辑结构有几种形式？文件的存取方法？**

   - 文件的逻辑结构：一种是无结构的字节流式文件；一种是有结构的记录式文件，记录式文件又划分为定长式和变长式。UNIX 和 Windows 就是以无结构的字节流形式组织文件和处理文件的
   - 文件的存取方法：
     - 顺序存取：对文件的存取都是在前一次存取的基础上进行的，是最简单的存取方法。顺序存取就是严格按照字节或记录出现的先后次序顺序依次存取的
     - 直接存取：直接存取又叫做随机存取。它允许用户随意的存取文件中的一个记录，而不管上一次存取的是那个记录。对于定长记录式文件，直接存取方便且高效；而对于变长记录式文件，则十分低效。故对于变长记录文件，通常采用顺序存取法

4. **文件的物理结构有哪几种?对于不同的结构，文件系统是如何进行管理的?**

   - 连续文件：

     连续文件又叫做顺序文件，是最简单的文件物理结构。它是把逻辑上连续的文件信息存储在连续的物理块中的一种组织方式:book:（P111）

     优点：

     - 实现简单：只要记住文件的第一块所在位置及文件包括的块数即可
     - 支持顺序存取和随机存取：只有这种结构的文件才适合存放在磁带上
     - 存取速度快：只要访问一次文件的管理信息，就可方便地存取到任一记录

     缺点：

     - 不灵活：要求在文件创建时，就给出文件的最大长度，且一旦创建就不允许动态修改
     - 容易产生碎片：当文件被删除时，文件存储空间可能出现许多小的无法利用的空洞。这种结构适合存储操作系统和实用程序一类长度不变的系统文件

   - 链接（或串联）文件：

     如果用户基本上是顺序存取文件中的信息，为了克服采用连续结构而产生的碎片问题，可以将逻辑上连续的记录分配到不连续的物理块中（链式结构）

     优点：

     - 允许文件动态增长，增加了使用的灵活性

     缺点：

     - 只能顺序存取

     为克服链接文件不能顺序存取的缺点，可以把指针字从各文件物理块中取出，放在一个表中或在存储器中建一个索引:book:（P112）

     DOS 使用这种方式分配和管理磁盘空间，并将此表叫做盘文件映射表或文件分配表（File Allocation Table, FAT）

     利用文件分配表，不必访问磁盘就能很快定位一个记录的位置。该方式的缺点是在系统工作期间，整个表必须在主存

   - 索引文件：

     为方便用户存取文件，为存储的文件建立一个索引表，该表指出文件的逻辑块与物理块的映射关系。将文件索引表所在物理块记录在文件目录表中:book:（P113）

     多级索引表:book:（P113）

     优点：

     - 允许文件动态修改，增加了文件的灵活性
     - 允许用户按照要求，直接对文件进行存取

     缺点：

     - 由于使用了索引表，增加了存储器空间的开销
     - 降低了文件的存取速度：每个文件的存取至少需要访问外部存储器两次，一次访问索引表，一次访问文件信息

   - 索引顺序文件：

     它将顺序文件中的所有记录分成若干组，并为其建立索引表。每组第一个记录建立一个索引项，其他记录不建立索引项

5. **DOS文件卷的结构，DOS系统的文件物理结构是什么？**

   - 文件卷的结构：
     - 引导扇区：占用分区的第一个扇区。当它用作数据盘时，该扇区保留不用。当它作为系统盘时，用以读入并引导操作系统
     - 文件分配表（FAT）：由若干个扇区组成，用来指出整个文件存储空间的使用情况。为安全起见，还为 FAT 区留出一个备份 FAT2
     - 根目录区：由若干扇区组成，记录根目录中保存的文件和子目录情况。根目录的大小由文件卷的容量决定，一般为512个目录项
     - 文件数据区：用来存放系统文件、子目录文件和各种各样的应用程序和用户文件
   - 文件的物理结构：带链接索引表的链接文件结构

6. **了解记录的组块和分解。**

   - 记录的组块：

     把多个逻辑记录存放在一个物理块中的工作叫做记录的组块。把一个块中存放的逻辑记录个数叫做块因子

     进行组块操作时，必须使用主存缓冲区。当用户要写记录到磁盘时，系统为它分配一个主存缓冲区，将要写记录先写入主存缓冲区。当缓冲区写满时，才真正启动磁盘进行实际写，从而大大降低了启动磁盘的次数，延长了磁盘介质的寿命

   - 记录的分解：

     从一个物理块中将一个逻辑记录分离出来的工作叫做记录的分解

7. **文件存储空间的管理方法有几种?它们各是如何实现文件存储空间的分配和回收的?**

   - 空白文件目录：:book:（P117）

     所谓空白文件，是指一个连续未用的空闲块区。系统为所有这些空白文件建立一张表，叫做空白文件目录。每个空白文件占用其中一个表目

     这是一种最简单的空闲区管理技术，适合于文件的静态分配（即连续结构的文件分配）

   - 空闲块链：:book:（P117）

     把所有空闲块链接成一个链，即空闲块链，主存保留一个链头指针

     空白块成组链表

   - 位映像表或位示图：:book:（P118）

     适合文件静态分配和动态分配的最简单管理方法是采用位映像表。位映像表使用一个位向量，磁盘中的每个块占用其中的一位

     优点：

     - 比较容易找到一个或几个连续的空闲块
     - 这种位映像表尺寸固定，通常又比较小，可以保存在主存中，从而可以高速地实现文件的分配和回收工作

8. **建立多级目录有哪些好处?文件的重名和共享问题是如何得到解决的?**

   - 好处：
     - 层次结构清晰，便于管理和保护
     - 有利于文件分类
     - 解决文件重名问题
     - 提高文件检索速度
     - 能进行存取权限的控制
   - 文件的重名问题解决：:question:
   - 文件的共享问题解决：:question:

9. **文件系统中，常用的文件操作命令有哪些？它们的具体功能是什么?打开和关闭文件命令的目的是什么?**

   - 创建（CREATE）文件：在指定设备上为指定路径名的文件产生一个目录项，并设置文件的有关属性，如文件名、文件的存取方法等，并将文件的大小置为0
   - 删除（DELETE）文件：当一个文件不再需要时，可用此命令删除。根据文件的路径名找到指定的目录项，根据目录项的信息回收文件占用的各个物理块，再将文件的目录置为空
   - 打开（OPEN）文件：所谓打开文件就是按照文件路径名找到文件目录项，进而找到文件控制块信息。之后，把 FCB 复制到内存，并记录到系统打开文件表。系统打开文件表是由系统中的文件对象组成的链表，文件对象记录了该文件的读写位置指针、文件方法和共享该文件的进程数信息
   - 关闭（CLOSE）文件：释放文件使用时的所有主存资源，以便让以后需要打开的文件占用。在关闭时，若该目录项调入主存后修改过，要将其复制到磁盘，对于基于缓冲的文件读写，还要将未写入磁盘的缓冲区信息写入磁盘。之后释放该目录项占用区和系统缓冲区。文件关闭后，不能再使用。要使用，需要再打开
   - 读（READ）和写（WRITE）文件
   - 追加（APPEND）文件
   - 随机存取（SEEK）文件
   - 得到文件属性（GET ATTRIBUTES）
   - 设置文件属性（SET ATTRIBUTES）
   - 重命名（RENAME）文件

10. **存取控制表ACL的概念。**

    每个对象都有一个有序表，它包含了有权存取该对象的所有域。这个表叫做存取控制表（Access Control List, ACL）:book:（P121）

11. **理解内存映射文件（memory mapped file）的过程。**

    允许进程分配虚存的一部分地址空间，然后将磁盘上的一个文件映射到该空间，对文件块的存取是通过访问虚存的一个页来实现的。映射一个文件到虚存是操作系统提供的一个系统调用，将文件映射到虚存的一个区域后，返回包含文件复制的字节数组的虚拟地址。仅当需要对存储器映射文件存取时，实际的数据才进行传输。由于使用与请求页式虚存管理相同的存取机制来处理传输的，故存储器映射 I/O 是有效的。程序员不必使用文件命令读写文件，而是使用存储器映射文件读写虚存

### 第6章 - 设备管理

1. **I/O设备通常大致可分为哪两大类？各自传输的信息单位有什么特点？** 

   - 字符设备（Character Device）：

     又叫做人机交互设备。用户通过这些设备实现与计算机系统的通信。大多以字符为单位发送和接收数据，数据通信的速度比较慢

   - 块设备（Block Device）：

     又叫外部设备。用户通过这些设备实现程序和数据的长期保存。与字符设备相比，它们是以块为单位进行数据传输的，如磁盘、磁带和光盘等

2. **常用的四种数据传输方式。**

   - 程序查询方式：CPU执行 I/O 指令时，它直接向设备控制器发启动设备写的 I/O 命令，并将要写的数据从主存写入设备的数据缓冲寄存器中。控制器将状态寄存器的设备忙标识位置1。一旦启动成功，CPU 就一直循环查询设备是否已经完成输出的状态标识，当设备完成传输后，将设备转台寄存器的设备忙标识位清零，以指示设备已经完成输出，等待接收下一个命令
   - 中断方式：启动设备成功后，CPU 转去执行另一个程序，设备进行数据传输。当设备完成时，向 CPU 提出中断请求。CPU 执行完当前一条指令，就相应中断，转去执行设备的中断处理程序。在中断处理程序中，CPU 检查设备状态寄存器的错误标识是否被设置，若是，给出“传输错误”信息，故障终止程序的执行。若正确完成，再检查是否还有待传输的数据。若有，CPU 再启动设备进行信息传输。在中断返回后，CPU 继续执行被中断程序。重复该过程，直至数据传输完成。显然，程序中断比程序查询方式更有效，它使得 CPU 可以与设备并行工作
   - 直接存储器访问（DMA）：磁盘设备与存储器之间的数据传送期间不需要 CPU 介入，处理机仅在数据传输开始和完成时进行简单的干预处理，大大减轻了 CPU 的负担

   - 通道：CPU 通过存储总线与内存连接，内存与其他设备通过不同的通道进行连接。每个通道又分别与另一类 I/O 总线相连，而 I/O 总线与具体设备控制器连接，用于执行设备的 I/O 操作
     - 字节多路通道：以字节为单位传输信息，可以分时地执行多个通道程序，当一个通道程序控制某台设备传送1字节后，通道硬件就控制转去执行另一个通道程序，控制另一台设备传送信息。字节多路通道主要用来连接大量慢速的设备，如纸带输入/输出机
     - 选择通道：以成组方式工作，每次传送一批数据，传送速度很高。选择通道在一段时间内只能执行一个通道程序，只允许一台设备进行数据传输。常用它连接高速设备，如磁鼓、固定头磁盘等
     - 数组多路通道：先为一台设备执行一条通道指令，然后自动转接，为另一台设备执行一条通道指令。这样，对于连接多台磁盘机的数组多路通道，可以启动它们，同时执行移臂定位操作，然后按序交叉地传输一批批数据。数组多路通道实际上是对通道采用多道程序设计的硬件实现

3. **根据设备的使用方式，设备被分为几种类型？何为虚拟设备？它是通过什么技术实现的？**

   - 几种类型：:question:
   - 虚拟设备：为了提高独占设备的利用效率，引入虚拟设备。所谓虚拟设备，是指在一类设备上模拟另一类设备的 I/O 技术。常用可共享的高速设备模拟独占的慢速设备。虚拟设备的引入满足了多道程序和多用户系统对独占型设备的共享使用。Spooling 技术正是用来实现虚拟设备的一种技术

4. **按照设备管理的层次结构，I/O软件划分为几层？各层主要实现哪些功能？** 

   - 用户层的 I/O 接口：大部分I/O软件都包含在操作系统中，有一小部分是由与用户程序连接在一起的库函数构成的
   - 独立于设备的软件：
     - 独立于设备的 I/O 
     - 设备命名
     - 设备保护
     - 提供与设备无关的块尺寸
     - 缓冲技术
     - 负责设备的分配和调度
     - 出错处理
   - 设备驱动程序：
     - 设备初始化
     - 启动设备例程
     - 中断处理例程
   - 中断处理程序
   - I/O 硬件

5. **何为设备的独立性？（设备独立性是指用户及用户程序不受系统配置的设备类型和具体设备的台号的影响。用户只是使用逻辑设备，具体的映射由操作系统完成。）**

   设备独立性是指用户及用户程序不受系统配置的设备类型和具体设备的台号的影响。用户只是使用逻辑设备，具体的映射由操作系统完成

6. **什么是SPOOLING技术？以输出为例，说明它的实现原理。（SPOOLING技术是以空间换时间）**

   Spooling 实际是一种缓冲技术。下面以打印机为例，说明 Spooling 技术的实现。由于打印机不能接收各进程的交叉数据流，为了使多用户进程能并发打印它们的输出，又使其输出不交叉在一起，操作系统解决的办法是：当进程要求输出打印时，系统并不为它分配打印设备，而是分配可共享设备（如硬盘）的一部分空间，使每个进程的输出被缓冲到一个独立的磁盘文件上。当进程完成执行时，再将相应的被缓冲的文件进行排队，准备打印输出。之后，Spooling 系统一次一个地将排队的待打印的文件复制给打印机进行实际的打印。这种技术又叫缓输出技术。这样提高了独占设备的利用率，也减少了进程等待设备进行数据传输的时间，缩短了用户进程的周转时间

7. **一个特定磁盘上的信息如何进行编址？盘面号、磁道号 和扇区号（或柱面号、磁头号和扇区号）。**

   盘面号、磁道号 和扇区号（或柱面号、磁头号和扇区号）

8. **要将磁盘上一个块的信息传输到主存需要系统花费哪些时间？（寻道时间、旋转延迟时间和读/写传输时间）**

   寻道时间、旋转延迟时间和读/写传输时间

9. **常用的磁盘调度算法：先来先服务、最短寻道时间优先、扫描法（SCAN, C_SCAN, LOOK, C_LOOK）。**

   先来先服务、最短寻道时间优先、扫描法（SCAN, C_SCAN, LOOK, C_LOOK）